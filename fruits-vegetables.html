<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ekomart - Online Grocery Shop</title>
  <link rel="stylesheet" href="style.css">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  
</head>
<body>

  <!-- ================== Promo Top Bar ================== -->
  <div class="bg-success text-white py-2 promo-bar">
    <div class="container d-flex flex-column flex-md-row justify-content-between align-items-center small">
      <div class="d-flex align-items-center gap-2 mb-2 mb-md-0">
        <i class="bi bi-truck fs-5 me-2"></i>
        <span>FREE delivery & 40% Discount for next 3 orders! Place your 1st order in:</span>
        <strong class="ms-1"><span id="promo-days">20</span></strong> Days
        <strong><span id="promo-hours">23</span></strong> Hour
        <strong><span id="promo-minutes">28</span></strong> Min
        <strong><span id="promo-seconds">40</span></strong> Sec
      </div>
      <div class="d-flex align-items-center gap-2">
        <i class="bi bi-telephone me-1"></i>
        <span>Need help? Call Us:</span> <strong>+258 3268 21485</strong>
      </div>
    </div>
  </div>

  <!-- ================== Secondary Header ================== -->
  <div class="bg-light border-bottom py-2">
    <div class="container d-flex justify-content-between align-items-center flex-wrap small text-muted">
      <div class="d-flex flex-wrap align-items-center gap-3">
        <a href="about.html" class="text-muted text-decoration-none"><i class="bi bi-info-circle me-1"></i>About Us</a>
        <a href="logiin.html" class="text-muted text-decoration-none"><i class="bi bi-person me-1"></i>My Account</a>
        <a href="#" class="text-muted text-decoration-none"><i class="bi bi-heart me-1"></i>Wishlist</a>
        <span class="vr"></span>
        <span><i class="bi bi-clock me-1"></i>We deliver everyday 7:00 - 22:00</span>
      </div>
      <div class="d-flex flex-wrap align-items-center gap-3">
        <div class="dropdown">
          <a class="dropdown-toggle text-muted text-decoration-none" href="#" role="button" data-bs-toggle="dropdown">
            <i class="bi bi-translate me-1"></i>English
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">English</a></li>
            <li><a class="dropdown-item" href="#">Hindi</a></li>
          </ul>
        </div>
        <div class="dropdown">
          <a class="dropdown-toggle text-muted text-decoration-none" href="#" role="button" data-bs-toggle="dropdown">
            <i class="bi bi-currency-dollar me-1"></i>USD
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">USD</a></li>
            <li><a class="dropdown-item" href="#">INR</a></li>
          </ul>
        </div>
        <a href="#" class="text-muted text-decoration-none"><i class="bi bi-truck me-1"></i>Track Order</a>
      </div>
    </div>
  </div>

  <!-- ================== Main Header ================== -->
  <div class="bg-white py-3 border-bottom sticky-top" style="z-index: 1020;">
    <div class="container d-flex justify-content-between align-items-center flex-nowrap">
      <a href="home.html" class="d-flex align-items-center text-decoration-none me-4">
        <img src="images/logo.png" alt="Logo" width="48" height="48" class="me-2">
        <span class="fs-3 fw-bold text-dark">EKO</span><span class="fs-3 fw-bold text-success">MART</span>
      </a>
      <div class="d-flex flex-grow-1 mx-3" style="max-width: 600px; min-width: 260px;">
        <div class="input-group shadow-sm rounded-3 overflow-hidden">
          <button class="btn btn-light fw-bold text-dark border-end px-3 dropdown-toggle" data-bs-toggle="dropdown"><i class="bi bi-list"></i> Categories</button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Fruits & Vegetables</a></li>
            <li><a class="dropdown-item" href="#">Dairy</a></li>
            <li><a class="dropdown-item" href="#">Bakery</a></li>
            <li><a class="dropdown-item" href="#">Meat</a></li>
            <li><a class="dropdown-item" href="#">Snacks</a></li>
            <li><a class="dropdown-item" href="#">Beverages</a></li>
          </ul>
          <input type="text" class="form-control border-0" placeholder="Search for products, categories or brands">
          <button class="btn btn-success fw-bold px-4"><i class="bi bi-search me-1"></i>Search</button>
        </div>
      </div>
      <div class="nav-icons d-flex align-items-center gap-2 ms-3">
        <button class="btn d-flex align-items-center position-relative"><i class="bi bi-person fs-5"></i><span class="d-none d-md-inline ms-2">Account</span></button>
        <button class="btn d-flex align-items-center position-relative"><i class="bi bi-bell fs-5"></i><span class="badge rounded-pill position-absolute top-0 start-100 translate-middle bg-success">0</span></button>
        <button class="btn d-flex align-items-center position-relative"><i class="bi bi-heart fs-5"></i><span class="d-none d-md-inline ms-2">Wishlist</span><span class="badge rounded-pill position-absolute top-0 start-100 translate-middle bg-success">0</span></button>
        <button class="btn d-flex align-items-center position-relative"><i class="bi bi-cart fs-5"></i><a href="cart.html" class="btn btn-outline-light position-relative">🛒<span class="d-none d-md-inline ms-2">Cart</span><span id="cart-count" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span></a></button>
      </div>
    </div>
  </div>

  <!-- ================== Navigation Bar ================== -->
  <nav class="bg-light border-bottom">
    <div class="container d-flex justify-content-between align-items-center flex-wrap py-2">
      <ul class="nav gap-1">
        <li class="nav-item"><a class="nav-link text-dark fw-semibold px-3" href="home.html">Home</a></li>
        <li class="nav-item"><a class="nav-link text-dark fw-semibold px-3" href="about.html">About</a></li>
        <li class="nav-item"><a class="nav-link text-dark fw-semibold px-3" href="#">Shop</a></li>
        <li class="nav-item"><a class="nav-link text-dark fw-semibold px-3" href="#">Vendors</a></li>
        <li class="nav-item"><a class="nav-link text-dark fw-semibold px-3" href="#">Pages</a></li>
        <li class="nav-item position-relative"><a class="nav-link text-dark fw-semibold px-3" href="#">Dashboard<span class="position-absolute top-0 start-100 translate-middle badge bg-success rounded-pill" style="font-size: 0.6rem;">New</span></a></li>
        <li class="nav-item"><a class="nav-link text-dark fw-semibold px-3" href="contact.html">Contact</a></li>
      </ul>
      <button class="btn btn-success btn-sale shadow-sm ml-auto">🎉 30% OFF</button>
    </div>
  </nav>

  <!-- ================== Body Section (Sidebar + Products) ================== -->
  <div class="container-fluid py-5">
    <div class="row">
      <!-- Sidebar -->
      <aside class="col-md-3">
        <div class="bg-white border rounded-3 shadow-sm p-3 mb-4">
          <h6 class="fw-bold mb-2">Price Range</h6>
          <input type="range" class="form-range" id="priceRange" min="0" max="150" value="150">
          <p class="small mb-2">Price: $0 – <span id="priceValue">150</span></p>
          <button class="btn btn-success w-100">Filter</button>
        </div>

        <div class="bg-white border rounded-3 shadow-sm p-3 mb-4">
          <h6 class="fw-bold mb-2">Product Categories</h6>
          <div class="form-check"><input class="form-check-input category-filter" type="checkbox" id="fruits" value="Fruits"><label class="form-check-label" for="fruits">Fruits</label></div>
          <div class="form-check"><input class="form-check-input category-filter" type="checkbox" id="vegetables" value="Vegetables"><label class="form-check-label" for="vegetables">Vegetables</label></div>
        </div>

        <div class="bg-white border rounded-3 shadow-sm p-3 mb-4">
          <h6 class="fw-bold mb-2">Select Brands</h6>
          <div class="form-check"><input class="form-check-input brand-filter" type="checkbox" id="brandA" value="FreshFarm"><label class="form-check-label" for="brandA">FreshFarm</label></div>
          <div class="form-check"><input class="form-check-input brand-filter" type="checkbox" id="brandB" value="GreenLeaf"><label class="form-check-label" for="brandB">GreenLeaf</label></div>
          <div class="form-check"><input class="form-check-input brand-filter" type="checkbox" id="brandC" value="NatureBest"><label class="form-check-label" for="brandC">NatureBest</label></div>
          <div class="form-check"><input class="form-check-input brand-filter" type="checkbox" id="brandD" value="FruitKing"><label class="form-check-label" for="brandD">FruitKing</label></div>
        </div>
      </aside>

      <!-- Products Grid -->
      <main class="col-md-9">
        <div class="row g-4" id="productList">
          <!-- Product cards will be rendered by JS -->
          <!-- 🔁 Add more col-md-4 product cards here -->
        </div>
      </main>
    </div>
  </div>

  <!-- Floating Cart Counter -->
  <div class="position-fixed bottom-0 end-0 bg-success text-white px-3 py-2 rounded-top-start shadow"
       style="z-index:1050; font-weight:500; min-width:260px;">
    🛒 Cart Items: <span id="cartCount">0</span>
    <button class="btn btn-light btn-sm ms-2" id="showCartBtn">View Cart</button>
    <div id="cartSidebar" class="bg-white text-dark border rounded shadow p-3 position-fixed end-0 bottom-0" style="width:300px; max-height:60vh; overflow-y:auto; display:none; z-index:1100;">
  <h6 class="fw-bold mb-2">Your Cart</h6>
  <ul id="cartList" class="list-unstyled mb-2"></ul>
  <a href="cart.html" class="btn btn-primary w-100 mb-2">Go to Cart Page</a>
  <button class="btn btn-success w-100" id="closeCartBtn">Close</button>
    </div>
  </div>

  <!-- ================== Footer ================== -->
  <footer class="footer bg-light pt-5">
    <div class="container">
      <div class="row">
        <div class="col-md-3 mb-4">
          <h6 class="fw-bold">About Company</h6>
          <div class="d-flex align-items-center my-3">
            <div class="bg-white border rounded-circle d-flex align-items-center justify-content-center" style="width: 45px; height: 45px;">
              <i class="bi bi-telephone-fill text-success fs-5"></i>
            </div>
            <div class="ms-3">
              <small class="text-muted">Have Question? Call Us 24/7</small>
              <div class="text-success fw-bold">+258 3692 2569</div>
            </div>
          </div>
          <ul class="list-unstyled text-muted small">
            <li>Monday – Friday: <strong class="text-dark">8:00am – 6:00pm</strong></li>
            <li>Saturday: <strong class="text-dark">8:00am – 6:00pm</strong></li>
            <li>Sunday: <strong class="text-dark">Service Close</strong></li>
          </ul>
        </div>
        <div class="col-md-2 mb-4">
          <h6 class="fw-bold">Our Stores</h6>
          <ul class="list-unstyled text-muted">
            <li><a href="#" class="text-decoration-none text-muted">Delivery Information</a></li>
            <li><a href="#" class="text-decoration-none text-muted">Privacy Policy</a></li>
            <li><a href="#" class="text-decoration-none text-muted">Terms & Conditions</a></li>
            <li><a href="#" class="text-decoration-none text-muted">Support Center</a></li>
            <li><a href="#" class="text-decoration-none text-muted">Careers</a></li>
          </ul>
        </div>
        <div class="col-md-2 mb-4">
          <h6 class="fw-bold">Shop Categories</h6>
          <ul class="list-unstyled text-muted">
            <li><a href="#" class="text-decoration-none text-muted">Contact Us</a></li>
            <li><a href="#" class="text-decoration-none text-muted">Information</a></li>
            <li><a href="#" class="text-decoration-none text-muted">About Us</a></li>
            <li><a href="#" class="text-decoration-none text-muted">Careers</a></li>
            <li><a href="#" class="text-decoration-none text-muted">Nest Stories</a></li>
          </ul>
        </div>
        <div class="col-md-2 mb-4">
          <h6 class="fw-bold">Useful Links</h6>
          <ul class="list-unstyled text-muted">
            <li><a href="#" class="text-decoration-none text-muted">Cancellation & Returns</a></li>
            <li><a href="#" class="text-decoration-none text-muted">Report Infringement</a></li>
            <li><a href="#" class="text-decoration-none text-muted">Payments</a></li>
            <li><a href="#" class="text-decoration-none text-muted">Shipping</a></li>
            <li><a href="#" class="text-decoration-none text-muted">FAQ</a></li>
          </ul>
        </div>
        <div class="col-md-3 mb-4">
          <h6 class="fw-bold">Our Newsletter</h6>
          <p class="text-muted small">Subscribe to the mailing list to receive updates on the new arrivals and other discounts</p>
          <form class="d-flex mb-2">
            <input type="email" class="form-control rounded-0" placeholder="Your email address">
            <button class="btn btn-success rounded-0 ms-2">Subscribe</button>
          </form>
          <small class="text-muted">I would like to receive news and special offer</small>
        </div>
      </div>
      <div class="d-flex flex-column flex-md-row justify-content-between align-items-center py-3 border-top">
        <div class="mb-2 mb-md-0">
          <small>Copyright 2025 <strong class="text-dark">Ekomart</strong>. All rights reserved.</small>
        </div>
        <div class="d-flex align-items-center">
          <span class="me-2">Follow Us:</span>
          <div class="d-flex gap-2">
            <a href="#" class="text-dark"><i class="bi bi-facebook"></i></a>
            <a href="#" class="text-dark"><i class="bi bi-twitter"></i></a>
            <a href="#" class="text-dark"><i class="bi bi-youtube"></i></a>
            <a href="#" class="text-dark"><i class="bi bi-whatsapp"></i></a>
            <a href="#" class="text-dark"><i class="bi bi-instagram"></i></a>
          </div>
        </div>
      </div>
    </div>
  </footer>
<script>
// Sync cart counters on page load
function syncCartCounters() {
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  let totalQty = cart.reduce((sum, item) => sum + item.qty, 0);
  if (document.getElementById('cartCount')) document.getElementById('cartCount').textContent = totalQty;
  if (document.getElementById('cart-count')) document.getElementById('cart-count').textContent = totalQty;
}
document.addEventListener('DOMContentLoaded', syncCartCounters);
// Promo countdown timer
function updatePromoTimer() {
  const now = new Date();
  const end = new Date(now.getFullYear(), now.getMonth() + 1, now.getDate(), 23, 59, 59);
  const diff = end - now;
  if (diff > 0) {
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
    const minutes = Math.floor((diff / (1000 * 60)) % 60);
    const seconds = Math.floor((diff / 1000) % 60);
    document.getElementById('promo-days').textContent = days;
    document.getElementById('promo-hours').textContent = hours;
    document.getElementById('promo-minutes').textContent = minutes;
    document.getElementById('promo-seconds').textContent = seconds;
  }
}
setInterval(updatePromoTimer, 1000);
updatePromoTimer();

// Price range filter
const priceRange = document.getElementById('priceRange');
const priceValue = document.getElementById('priceValue');
if (priceRange && priceValue) {
  priceRange.addEventListener('input', function() {
    priceValue.textContent = priceRange.value;
    renderProducts(); // live update on slider move
  });
}

// Sidebar category and brand filters (basic demo)
const productList = document.getElementById('productList');
const checkboxes = document.querySelectorAll('.form-check-input');
checkboxes.forEach(function(box) {
  box.addEventListener('change', function() {
    // For demo: just highlight sidebar filters
    if (box.checked) {
      box.parentElement.classList.add('bg-light');
    } else {
      box.parentElement.classList.remove('bg-light');
    }
    // Real filtering would hide/show products based on filter
  });
});

// Cart logic

// Cart sidebar show/hide
document.getElementById('showCartBtn').addEventListener('click', function() {
  document.getElementById('cartSidebar').style.display = 'block';
});
document.getElementById('closeCartBtn').addEventListener('click', function() {
  document.getElementById('cartSidebar').style.display = 'none';
});

// Product data for filtering
const products = [
  { id: 1, name: 'Fresh Fruits', category: 'Fruits', brand: 'FruitKing', price: 45, img: './img/freshfruit.jpg', badge: '10% Off', badgeClass: 'bg-success text-white', oldPrice: 21 },
  { id: 2, name: 'Fresh Vegetables', category: 'Vegetables', brand: 'GreenLeaf', price: 89, img: './img/freshvegetable.jpg', badge: 'Best Seller', badgeClass: 'bg-danger text-white', oldPrice: 15 },
  { id: 3, name: 'Bananas', category: 'Fruits', brand: 'NatureBest', price: 50, img: './img/banana1.jpg', badge: 'New', badgeClass: 'bg-info text-dark', oldPrice: 10 },
  { id: 4, name: 'Grapes', category: 'Fruits', brand: 'FreshFarm', price: 75, img: './img/grapes.jpg', badge: '20% Off', badgeClass: 'bg-warning text-dark', oldPrice: 18 },
  { id: 5, name: 'Apples', category: 'Fruits', brand: 'FruitKing', price: 110, img: './img/apple.jpg', badge: 'Fresh', badgeClass: 'bg-success text-white', oldPrice: 13 },
  { id: 6, name: 'Carrots', category: 'Vegetables', brand: 'GreenLeaf', price: 97, img: './img/food1.jpg', badge: 'Healthy', badgeClass: 'bg-primary text-white', oldPrice: 9 },
  { id: 7, name: 'Tomatoes', category: 'Vegetables', brand: 'NatureBest', price: 146, img: './img/food2.jpg', badge: 'Fresh', badgeClass: 'bg-success text-white', oldPrice: 8 },
];

function renderProducts() {
  const productList = document.getElementById('productList');
  productList.innerHTML = '';
  // Get selected filters
  const selectedCategories = Array.from(document.querySelectorAll('.category-filter:checked')).map(cb => cb.value);
  const selectedBrands = Array.from(document.querySelectorAll('.brand-filter:checked')).map(cb => cb.value);
  const maxPrice = parseInt(document.getElementById('priceRange').value) || 150;
  // Filter products
  let filtered = products.filter(p => {
    const catMatch = selectedCategories.length === 0 || selectedCategories.includes(p.category);
    const brandMatch = selectedBrands.length === 0 || selectedBrands.includes(p.brand);
    const priceMatch = p.price <= maxPrice;
    return catMatch && brandMatch && priceMatch;
  });
  // Render cards
  if (filtered.length === 0) {
    productList.innerHTML = '<div class="col-12 text-center text-muted">No products found.</div>';
    return;
  }
  filtered.forEach(product => {
    productList.innerHTML += `
      <div class="col-md-4">
        <div class="card h-100 shadow-sm">
          <img src="${product.img}" class="card-img-top" alt="${product.name}" style="height:220px;object-fit:cover;">
          <div class="card-body d-flex flex-column">
            <span class="badge ${product.badgeClass} mb-2">${product.badge}</span>
            <h5 class="card-title">${product.name}</h5>
            <p class="card-text mb-1">Brand: <span class="fw-semibold">${product.brand}</span></p>
            <p class="card-text mb-1">Category: <span class="fw-semibold">${product.category}</span></p>
            <div class="mb-2">
              <span class="fw-bold text-success fs-5">$${product.price}</span>
              <span class="text-muted text-decoration-line-through ms-2">$${product.oldPrice}</span>
            </div>
            <button class="btn btn-success mt-auto add-to-cart-btn" 
              data-id="${product.id}"
              data-name="${product.name}" 
              data-price="${product.price}" 
              data-img="${product.img}">
              <i class="bi bi-cart-plus"></i> Add to Cart
            </button>
          </div>
        </div>
      </div>
    `;
  });
  attachAddToCart();
}

function attachAddToCart() {
  document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const id = this.getAttribute('data-id');
      const name = this.getAttribute('data-name');
      const price = parseFloat(this.getAttribute('data-price'));
      const img = this.getAttribute('data-img');

      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      let found = cart.find(item => item.id === id);

      if (found) {
        found.qty += 1;
      } else {
        cart.push({ id, name, price, qty: 1, image: img });
      }

      localStorage.setItem('cart', JSON.stringify(cart));
      syncCartCounters();
      renderCartSidebar();
    });
  });
}

function renderCartSidebar() {
  let cart = JSON.parse(localStorage.getItem('cart')) || [];
  const cartList = document.getElementById('cartList');
  cartList.innerHTML = '';
  if (cart.length === 0) {
    cartList.innerHTML = '<li class="text-muted">Your cart is empty.</li>';
    return;
  }
  cart.forEach(item => {
    cartList.innerHTML += `<li class="mb-2 d-flex align-items-center">
      <img src="${item.image}" alt="${item.name}" style="width:40px;height:40px;object-fit:cover;" class="me-2 rounded">
      <span class="flex-grow-1">${item.name}</span>
      <span class="fw-bold text-success">$${item.price}</span>
      <span class="badge bg-secondary ms-2">x${item.qty}</span>
    </li>`;
  });
}

// Attach filter listeners
document.querySelectorAll('.category-filter, .brand-filter').forEach(cb => {
  cb.addEventListener('change', renderProducts);
});
document.getElementById('priceRange').addEventListener('input', function() {
  document.getElementById('priceValue').textContent = this.value;
  renderProducts();
});
document.querySelector('.btn-success.w-100').addEventListener('click', function() {
  priceValue.textContent = priceRange.value;
  renderProducts();
});

// Initial render
renderProducts();

  // <!-- Bootstrap JS -->
  // <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Custom JS -->
  <script>
  // ...existing code... (all logic already present above)
</script>